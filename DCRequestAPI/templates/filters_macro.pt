
<div id="selectable_filters">
	
	<fieldset>
		<legend>Filters</legend>
		<h4>Selected filters</h4>
		<div id="applied_filters">
			<block tal:condition="python: 'term_filters' in search_params">
				<block tal:repeat="filter_key search_params['term_filters']">
					<block tal:repeat="filter_value search_params['term_filters'][filter_key]">
						<div tal:condition="python: filter_key in selected_sourcefields" data-filter-id="filter_${filter_key}_${filter_value}" class="filter_checkbox">
							<input type="checkbox" form="search_form" checked="checked" value="${filter_key}:${filter_value}" name="term_filters" data-filter-id="filter_${filter_key}_${filter_value}">
							<label><b>${coldefs[filter_key]['en']}:</b> ${filter_value}</label>
						</div>
					</block>
				</block>
			</block>
		</div>
		
		<hr>
		
		<h4>Choose filter</h4>
		<div id="available_filters">
			<div tal:repeat="aggs_name selected_sourcefields" class="filter-select-box">
				<details tal:condition="python: aggs_name in aggregations" class="filter_selectors" tal:attributes="open 'open' if aggs_name in open_filter_selectors else None">
					<input type="checkbox" form="search_form" name="open_filter_selectors" class="hidden" value="${aggs_name}" tal:attributes="checked 'checked' if aggs_name in open_filter_selectors else None">
					<summary>${coldefs[aggs_name]['en']}</summary>
					<ul class="ul-no-bullet">
						<li tal:repeat="bucket aggregations[aggs_name]" class="bucket_entry" 
							data-filter-id="filter_${aggs_name}_${bucket['key']}" 
							data-filter-name="${coldefs[aggs_name]['en']}"
							data-filter-key="${aggs_name}"
							data-filter-value="${bucket['key']}">
							${bucket['key']} (${bucket['doc_count']})
						</li>
					</ul>
				</details>
			</div>
		</div>
	</fieldset>
	
	
</div>
